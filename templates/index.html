<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Social Media</title>

    <link rel="shortcut icon" href="static/assets/images/favicon.ico" />
    <link rel="stylesheet" href="static/assets/css/libs.min.css" />
    <link rel="stylesheet" href="static/assets/css/socialv.css?v=4.0.0" />
    <link
      rel="stylesheet"
      href="static/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="static/assets/vendor/remixicon/fonts/remixicon.css"
    />
    <link
      rel="stylesheet"
      href="static/assets/vendor/vanillajs-datepicker/dist/css/datepicker.min.css"
    />
    <link
      rel="stylesheet"
      href="static/assets/vendor/font-awesome-line-awesome/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="static/assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css"
    />
    <style>
      .upload-option {
        background-color: #d9f1ff;
        border-radius: 8px;
        padding: 10px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        height: 50px;
        text-decoration: none;
        color: #333;
      }

      .upload-option:hover {
        background-color: #c7eaff;
      }

      .hidden-input {
        display: none;
      }
      .comment-box {
        display: flex;
        align-items: center;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 6px 10px;
        background: #fff;
        margin-top: 20px;
      }

      .comment-box input {
        border: none;
        outline: none;
        flex-grow: 1;
        margin-right: 8px;
      }

      .comment-actions {
        display: flex;
        gap: 10px;
        align-items: center; /* pastikan semua icon sejajar tengah */
      }

      .comment-actions a {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .comment-send-btn {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0; /* kurangi padding agar tidak turun */
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .comment-send-btn i {
        font-size: 17px; /* samakan ukuran ikon */
        color: #666;
      }

      .comment-actions i {
        font-size: 17px;
        color: #666;
      }
      .story-link {
        cursor: pointer;
        margin-left: 4px;
      }

      .story-icon-wrapper {
        width: 60px;
        height: 60px;
        border: 2px solid #ccc;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .story-icon {
        font-size: 20px;
        color: #666;
        font-weight: bold;
        line-height: 1;
      }
      .iq-profile-avatar {
  position: relative;
  display: inline-block;
}

/* dot default (offline) */
.iq-profile-avatar::after {
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 50%;
  position: absolute;
  bottom: 0;
  right: 0;
  background-color: #ccc;      /* abu untuk offline */
  border: 2px solid white;
}

/* dot hijau untuk online */
.iq-profile-avatar.status-online::after {
  background-color: #4caf50;
}

    </style>
  </head>
  <body class="  ">
    <!-- loader Start -->
    <div id="loading">
      <div id="loading-center"></div>
    </div>
    <!-- loader END -->
    <!-- Wrapper Start -->
    <div class="wrapper">
      <div class="iq-sidebar sidebar-default">
        <div id="sidebar-scrollbar">
          <nav class="iq-sidebar-menu">
            <ul id="iq-sidebar-toggle" class="iq-menu">
              <li class="active">
                <a href="/dashboard" class=" ">
                  <i class="las la-newspaper"></i><span>Newsfeed</span>
                </a>
              </li>
              <li class="">
                <a href="/profile" class=" ">
                  <i class="las la-user"></i><span>Profile</span>
                </a>
              </li>
              <li class="">
                <a href="static/app/group.html" class=" ">
                  <i class="las la-users"></i><span>Group</span>
                </a>
              </li>
              <li class=" ">
                <a href="static/app/todo.html" class=" ">
                  <i class="las la-check-circle"></i><span>Todo</span>
                </a>
              </li>
              <li class=" ">
                <a href="static/dashboard/calendar.html" class=" ">
                  <i class="las la-calendar"></i><span>Calendar</span>
                </a>
              </li>
              <li class=" ">
                <a
                  href="#mailbox"
                  data-bs-toggle="collapse"
                  class="collapsed"
                  aria-expanded="false"
                >
                  <i class="ri-mail-line"></i><span>Email</span
                  ><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                </a>
                <ul
                  id="mailbox"
                  class="iq-submenu collapse"
                  data-bs-parent="#iq-sidebar-toggle"
                >
                  <li class="">
                    <a href="static/app/email.html"
                      ><i class="ri-inbox-line"></i>Inbox</a
                    >
                  </li>
                  <li class="">
                    <a href="static/app/email-compose.html"
                      ><i class="ri-edit-line"></i>Email Compose</a
                    >
                  </li>
                </ul>
              </li>
              <li class="">
                <a
                  href="#ui-elements"
                  data-bs-toggle="collapse"
                  class="collapsed"
                  aria-expanded="false"
                  ><i class="ri-focus-2-line"></i><span>Ui-Elements</span
                  ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                ></a>
                <ul
                  id="ui-elements"
                  class="iq-submenu collapse"
                  data-bs-parent="#iq-sidebar-toggle"
                >
                  <li class="">
                    <a
                      href="#ui-kit"
                      data-bs-toggle="collapse"
                      class="collapsed"
                      aria-expanded="false"
                      ><i class="ri-pencil-ruler-line"></i><span>UI Kit</span
                      ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                    ></a>
                    <ul
                      id="ui-kit"
                      class="iq-submenu collapse"
                      data-bs-parent="#ui-elements"
                    >
                      <li class="">
                        <a href="static/dashboard/ui-color.html"
                          ><i class="ri-font-color"></i>Colors</a
                        >
                      </li>
                      <li class=" ">
                        <a href="static/dashboard/ui-typography.html"
                          ><i class="ri-text"></i>Typography</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-alerts.html"
                          ><i class="ri-alert-line"></i>Alerts</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-badges.html"
                          ><i class="ri-building-3-line"></i>Badges</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-breadcrumb.html"
                          ><i class="ri-menu-2-line"></i>Breadcrumb</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-buttons.html"
                          ><i class="ri-checkbox-blank-line"></i>Buttons</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-cards.html"
                          ><i class="ri-bank-card-line"></i>Cards</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-carousel.html"
                          ><i class="ri-slideshow-line"></i>Carousel</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-embed-video.html"
                          ><i class="ri-slideshow-2-line"></i>Video</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-grid.html"
                          ><i class="ri-grid-line"></i>Grid</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-images.html"
                          ><i class="ri-image-line"></i>Images</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-list-group.html"
                          ><i class="ri-file-list-3-line"></i>list Group</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-modal.html"
                          ><i class="ri-stop-mini-line"></i>Modal</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-notifications.html"
                          ><i class="ri-notification-line"></i>Notifications</a
                        >
                      </li>
                      <li class="">
                        <a href="ui-pagination.html"
                          ><i class="ri-pages-line"></i>Pagination</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-popovers.html"
                          ><i class="ri-folder-shield-2-line"></i>Popovers</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-progressbars.html"
                          ><i class="ri-battery-low-line"></i>Progressbars</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-tabs.html"
                          ><i class="ri-database-line"></i>Tabs</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/ui-tooltips.html"
                          ><i class="ri-record-mail-line"></i>Tooltips</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li class="">
                    <a
                      href="#forms"
                      class="collapsed"
                      data-bs-toggle="collapse"
                      aria-expanded="false"
                      ><i class="ri-profile-line"></i><span>Forms</span
                      ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                    ></a>
                    <ul
                      id="forms"
                      class="iq-submenu collapse"
                      data-bs-parent="#ui-elements"
                    >
                      <li class="">
                        <a href="static/dashboard/form-layout.html"
                          ><i class="ri-tablet-line"></i>Form Elements</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/form-validation.html"
                          ><i class="ri-device-line"></i>Form Validation</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/form-switch.html"
                          ><i class="ri-toggle-line"></i>Form Switch</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/form-chechbox.html"
                          ><i class="ri-checkbox-line"></i>Form Checkbox</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/form-radio.html"
                          ><i class="ri-radio-button-line"></i>Form Radio</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li class="">
                    <a
                      href="#wizard-form"
                      class="collapsed"
                      data-bs-toggle="collapse"
                      aria-expanded="false"
                      ><i class="ri-archive-drawer-line"></i
                      ><span>Forms Wizard</span
                      ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                    ></a>
                    <ul
                      id="wizard-form"
                      class="iq-submenu collapse"
                      data-bs-parent="#ui-elements"
                    >
                      <li class="">
                        <a href="static/dashboard/form-wizard.html"
                          ><i class="ri-clockwise-line"></i>Simple Wizard</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/form-wizard-validate.html"
                          ><i class="ri-clockwise-2-line"></i>Validate Wizard</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/form-wizard-vertical.html"
                          ><i class="ri-anticlockwise-line"></i>Vertical
                          Wizard</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li class="">
                    <a
                      href="#tables"
                      class="collapsed"
                      data-bs-toggle="collapse"
                      aria-expanded="false"
                      ><i class="ri-table-line"></i><span>Table</span
                      ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                    ></a>
                    <ul
                      id="tables"
                      class="iq-submenu collapse"
                      data-bs-parent="#ui-elements"
                    >
                      <li class="">
                        <a href="static/dashboard/tables-basic.html"
                          ><i class="ri-table-line"></i>Basic Tables</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/data-table.html"
                          ><i class="ri-database-line"></i>Data Table</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/table-editable.html"
                          ><i class="ri-refund-line"></i>Editable Table</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li class="">
                    <a
                      href="#icons"
                      class="collapsed"
                      data-bs-toggle="collapse"
                      aria-expanded="false"
                      ><i class="ri-list-check"></i><span>Icons</span
                      ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                    ></a>
                    <ul
                      id="icons"
                      class="iq-submenu collapse"
                      data-bs-parent="#ui-elements"
                    >
                      <li class="">
                        <a href="static/dashboard/icon-fontawesome-5.html"
                          ><i class="ri-facebook-fill"></i>Font Awesome 5</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/icon-lineawesome.html"
                          ><i class="ri-keynote-line"></i>line Awesome</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/icon-remixicon.html"
                          ><i class="ri-remixicon-line"></i>Remixicon</a
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li class="">
                <a
                  href="#pages"
                  class="collapsed"
                  data-bs-toggle="collapse"
                  aria-expanded="false"
                  ><i class="ri-pages-line"></i><span>Pages</span
                  ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                ></a>
                <ul
                  id="pages"
                  class="iq-submenu collapse"
                  data-bs-parent="#iq-sidebar-toggle"
                >
                  <li class="">
                    <a
                      href="#authentication"
                      class="collapsed"
                      data-bs-toggle="collapse"
                      aria-expanded="false"
                      ><i class="ri-pages-line"></i><span>Authentication</span
                      ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                    ></a>
                    <ul
                      id="authentication"
                      class="iq-submenu collapse"
                      data-bs-parent="#pages"
                    >
                      <li class="">
                        <a href="/logout"
                          ><i class="ri-login-box-line"></i>Login</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/sign-up.html"
                          ><i class="ri-login-circle-line"></i>Register</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-recoverpw.html"
                          ><i class="ri-record-mail-line"></i>Recover
                          Password</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-confirm-mail.html"
                          ><i class="ri-file-code-line"></i>Confirm Mail</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-lock-screen.html"
                          ><i class="ri-lock-line"></i>Lock Screen</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li class="">
                    <a
                      href="#extra-pages"
                      class="collapsed"
                      data-bs-toggle="collapse"
                      aria-expanded="false"
                      ><i class="ri-pantone-line"></i><span>Extra Pages</span
                      ><i class="ri-arrow-right-s-line iq-arrow-right"></i
                    ></a>
                    <ul
                      id="extra-pages"
                      class="iq-submenu collapse"
                      data-bs-parent="#pages"
                    >
                      <li class="">
                        <a href="static/dashboard/pages-timeline.html"
                          ><i class="ri-map-pin-time-line"></i>Timeline</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-invoice.html"
                          ><i class="ri-question-answer-line"></i>Invoice</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/blank-page.html"
                          ><i class="ri-invision-line"></i>Blank Page</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-error.html"
                          ><i class="ri-error-warning-line"></i>Error 404</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-error-500.html"
                          ><i class="ri-error-warning-line"></i>Error 500</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-pricing.html"
                          ><i class="ri-price-tag-line"></i>Pricing</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-pricing-one.html"
                          ><i class="ri-price-tag-2-line"></i>Pricing 1</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-maintenance.html"
                          ><i class="ri-archive-line"></i>Maintenance</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-comingsoon.html"
                          ><i class="ri-mastercard-line"></i>Coming Soon</a
                        >
                      </li>
                      <li class="">
                        <a href="static/dashboard/pages-faq.html"
                          ><i class="ri-compasses-line"></i>Faq</a
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
          <div class="p-5"></div>
        </div>
      </div>

      <div class="iq-top-navbar">
        <div class="iq-navbar-custom">
          <nav class="navbar navbar-expand-lg navbar-light p-0">
            <div class="iq-navbar-logo d-flex justify-content-between">
              <a href="/dashboard">
                <img
                  src="static/assets/images/logo.png"
                  class="img-fluid"
                  alt=""
                />
                <span>SocialV</span>
              </a>
              <div class="iq-menu-bt align-self-center">
                <div class="wrapper-menu">
                  <div class="main-circle"><i class="ri-menu-line"></i></div>
                </div>
              </div>
            </div>
            <div class="iq-search-bar device-search">
              <form action="/search" method="GET" class="searchbox">
                <a class="search-link" href="#"
                  ><i class="ri-search-line"></i
                ></a>
                <input
                  type="text"
                  name="q"
                  class="text search-input"
                  placeholder="Search here..."
                />
              </form>
            </div>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-label="Toggle navigation"
            >
              <i class="ri-menu-3-line"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ms-auto navbar-list">
                <li>
                  <a href="/dashboard" class="d-flex align-items-center">
                    <i class="ri-home-line"></i>
                  </a>
                </li>
                <li class="nav-item dropdown">
                  <a
                    href="#"
                    class="dropdown-toggle"
                    id="group-drop"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    ><i class="ri-group-line"></i
                  ></a>
                  <div
                    class="sub-drop sub-drop-large dropdown-menu"
                    aria-labelledby="group-drop"
                  >
                    <div class="card shadow-none m-0">
                      <div
                        class="card-header d-flex justify-content-between bg-primary"
                      >
                        <div class="header-title">
                          <h5 class="mb-0 text-white">Friend Request</h5>
                        </div>
                        <small class="badge bg-light text-dark">4</small>
                      </div>
                      <div class="card-body p-0">
                        {% for req in req %}
                          <div class="iq-friend-request">
                            <div class="iq-sub-card iq-sub-card-big d-flex align-items-center justify-content-between">
                              <div class="d-flex align-items-center">
                                <img
                                  class="avatar-40 rounded"
                                  src="{{ req.sender_data.profile_picture or url_for('static', filename='assets/images/user/01.jpg') }}"
                                  alt=""
                                />
                                <div class="ms-3">
                                  <h6 class="mb-0">{{ req.sender_data.full_name }}</h6>
                                  <p class="mb-0">100 friends</p>
                                </div>
                              </div>
                              <div class="d-flex align-items-center">
                                <form action="{{ url_for('accept_friend') }}" method="post" class="me-3">
                                  <input type="hidden" name="sender_id" value="{{ req.sender_data._id }}"/>
                                  <button type="submit" class="btn btn-primary rounded">Confirm</button>
                                </form>
                                <form action="" method="post">
                                  <input type="hidden" name="sender_id" value="{{ req.sender_data._id }}"/>
                                  <button type="submit" class="btn btn-secondary rounded">Delete Request</button>
                                </form>
                              </div>
                            </div>
                          </div>
                        {% endfor %}
                      </div>                      
                      
                        <div class="text-center mt-3">
                          <a href="#" class="btn text-primary">View More Request</a>
                        </div>
                      </div>                      
                </li>
                <li class="nav-item dropdown">
                  <a
                    href="#"
                    class="search-toggle dropdown-toggle"
                    id="notification-drop"
                    data-bs-toggle="dropdown"
                  >
                    <i class="ri-notification-4-line"></i>
                  </a>
                  <div
                    class="sub-drop dropdown-menu"
                    aria-labelledby="notification-drop"
                  >
                    <div class="card shadow-none m-0">
                      <div
                        class="card-header d-flex justify-content-between bg-primary"
                      >
                        <div class="header-title bg-primary">
                          <h5 class="mb-0 text-white">All Notifications</h5>
                        </div>
                        <small class="badge bg-light text-dark">4</small>
                      </div>
                      <div class="card-body p-0">
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/01.jpg"
                                alt=""
                              />
                            </div>
                            <div class="ms-3 w-100">
                              <h6 class="mb-0">Emma Watson Bni</h6>
                              <div
                                class="d-flex justify-content-between align-items-center"
                              >
                                <p class="mb-0">95 MB</p>
                                <small class="float-right font-size-12"
                                  >Just Now</small
                                >
                              </div>
                            </div>
                          </div>
                        </a>
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/02.jpg"
                                alt=""
                              />
                            </div>
                            <div class="ms-3 w-100">
                              <h6 class="mb-0">New customer is join</h6>
                              <div
                                class="d-flex justify-content-between align-items-center"
                              >
                                <p class="mb-0">Cyst Bni</p>
                                <small class="float-right font-size-12"
                                  >5 days ago</small
                                >
                              </div>
                            </div>
                          </div>
                        </a>
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/03.jpg"
                                alt=""
                              />
                            </div>
                            <div class="ms-3 w-100">
                              <h6 class="mb-0">Two customer is left</h6>
                              <div
                                class="d-flex justify-content-between align-items-center"
                              >
                                <p class="mb-0">Cyst Bni</p>
                                <small class="float-right font-size-12"
                                  >2 days ago</small
                                >
                              </div>
                            </div>
                          </div>
                        </a>
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/04.jpg"
                                alt=""
                              />
                            </div>
                            <div class="w-100 ms-3">
                              <h6 class="mb-0">New Mail from Fenny</h6>
                              <div
                                class="d-flex justify-content-between align-items-center"
                              >
                                <p class="mb-0">Cyst Bni</p>
                                <small class="float-right font-size-12"
                                  >3 days ago</small
                                >
                              </div>
                            </div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a
                    href="#"
                    class="dropdown-toggle"
                    id="mail-drop"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    <i class="ri-mail-line"></i>
                  </a>
                  <div
                    class="sub-drop dropdown-menu"
                    aria-labelledby="mail-drop"
                  >
                    <div class="card shadow-none m-0">
                      <div
                        class="card-header d-flex justify-content-between bg-primary"
                      >
                        <div class="header-title bg-primary">
                          <h5 class="mb-0 text-white">All Message</h5>
                        </div>
                        <small class="badge bg-light text-dark">4</small>
                      </div>
                      <div class="card-body p-0">
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/01.jpg"
                                alt=""
                              />
                            </div>
                            <div class="w-100 ms-3">
                              <h6 class="mb-0">Bni Emma Watson</h6>
                              <small class="float-left font-size-12"
                                >13 Jun</small
                              >
                            </div>
                          </div>
                        </a>
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/02.jpg"
                                alt=""
                              />
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">Lorem Ipsum Watson</h6>
                              <small class="float-left font-size-12"
                                >20 Apr</small
                              >
                            </div>
                          </div>
                        </a>
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/03.jpg"
                                alt=""
                              />
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">Why do we use it?</h6>
                              <small class="float-left font-size-12"
                                >30 Jun</small
                              >
                            </div>
                          </div>
                        </a>
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/04.jpg"
                                alt=""
                              />
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">Variations Passages</h6>
                              <small class="float-left font-size-12"
                                >12 Sep</small
                              >
                            </div>
                          </div>
                        </a>
                        <a href="#" class="iq-sub-card">
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img
                                class="avatar-40 rounded"
                                src="static/assets/images/user/05.jpg"
                                alt=""
                              />
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">Lorem Ipsum generators</h6>
                              <small class="float-left font-size-12"
                                >5 Dec</small
                              >
                            </div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a
                    href="#"
                    class="d-flex align-items-center dropdown-toggle"
                    id="drop-down-arrow"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    <img
                      src="static/assets/images/user/1.jpg"
                      class="img-fluid rounded-circle me-3"
                      alt="user"
                    />
                    <div class="caption">
                      <h6 class="mb-0 line-height">{{full_name}}</h6>
                    </div>
                  </a>
                  <div
                    class="sub-drop dropdown-menu caption-menu"
                    aria-labelledby="drop-down-arrow"
                  >
                    <div class="card shadow-none m-0">
                      <div class="card-header bg-primary">
                        <div class="header-title">
                          <h5 class="mb-0 text-white">Hello {{full_name}}</h5>
                          <span class="text-white font-size-12">Available</span>
                        </div>
                      </div>
                      <div class="card-body p-0">
                        <a
                          href="/profile"
                          class="iq-sub-card iq-bg-primary-hover"
                        >
                          <div class="d-flex align-items-center">
                            <div class="rounded card-icon bg-soft-primary">
                              <i class="ri-file-user-line"></i>
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">My Profile</h6>
                              <p class="mb-0 font-size-12">
                                View personal profile details.
                              </p>
                            </div>
                          </div>
                        </a>
                        <a
                          href="/edit-profile"
                          class="iq-sub-card iq-bg-warning-hover"
                        >
                          <div class="d-flex align-items-center">
                            <div class="rounded card-icon bg-soft-warning">
                              <i class="ri-profile-line"></i>
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">Edit Profile</h6>
                              <p class="mb-0 font-size-12">
                                Modify your personal details.
                              </p>
                            </div>
                          </div>
                        </a>
                        <a
                          href="static/app/account-setting.html"
                          class="iq-sub-card iq-bg-info-hover"
                        >
                          <div class="d-flex align-items-center">
                            <div class="rounded card-icon bg-soft-info">
                              <i class="ri-account-box-line"></i>
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">Account settings</h6>
                              <p class="mb-0 font-size-12">
                                Manage your account parameters.
                              </p>
                            </div>
                          </div>
                        </a>
                        <a
                          href="static/app/privacy-setting.html"
                          class="iq-sub-card iq-bg-danger-hover"
                        >
                          <div class="d-flex align-items-center">
                            <div class="rounded card-icon bg-soft-danger">
                              <i class="ri-lock-line"></i>
                            </div>
                            <div class="ms-3">
                              <h6 class="mb-0">Privacy Settings</h6>
                              <p class="mb-0 font-size-12">
                                Control your privacy parameters.
                              </p>
                            </div>
                          </div>
                        </a>
                        <div class="d-inline-block w-100 text-center p-3">
                          <a
                            class="btn btn-primary iq-sign-btn"
                            href="/logout"
                            role="button"
                            >Sign out<i class="ri-login-box-line ms-2"></i
                          ></a>
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <div class="right-sidebar-mini right-sidebar">
        <div class="right-sidebar-panel p-0">
          <div class="card shadow-none">
            <div class="card-body p-0">
              <div class="media-height p-3" data-scrollbar="init">
                
              
              </div>
              <div class="right-sidebar-toggle bg-primary text-white mt-3">
                <i class="ri-arrow-left-line side-left-icon"></i>
                <i class="ri-arrow-right-line side-right-icon"
                  ><span class="ms-3 d-inline-block">Close Menu</span></i
                >
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-page" class="content-page">
        <div class="container">
          <div class="row">
            <div class="col-lg-8 row m-0 p-0">
              <div class="col-sm-12">
                <div
                  id="post-modal-data"
                  class="card card-block card-stretch card-height"
                >
                  <div class="card-header d-flex justify-content-between">
                    <div class="header-title">
                      <h4 class="card-title">Create Post</h4>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="d-flex align-items-center">
                      <div class="user-img">
                        <img
                          src="static/assets/images/user/1.jpg"
                          alt="userimg"
                          class="avatar-60 rounded-circle"
                        />
                      </div>
                      <form
                        class="post-text ms-3 w-100"
                        action="/post"
                        method="post"
                        data-bs-toggle="modal"
                        data-bs-target="#post-modal"
                        action="javascript:void();"
                      >
                        <input
                          type="text"
                          class="form-control rounded"
                          placeholder="Write something here..."
                          style="border: none"
                        />
                      </form>
                    </div>
                    <hr />
                    <ul
                      class="post-opt-block d-flex list-inline m-0 p-0 flex-wrap"
                    >
                      <li class="me-3 mb-md-0 mb-2">
                        <!-- Label berfungsi sebagai tombol -->
                        <label
                          for="file-upload"
                          class="btn btn-soft-primary"
                          style="cursor: pointer"
                        >
                          <img
                            src="static/assets/images/small/07.png"
                            alt="icon"
                            class="img-fluid me-2"
                          />
                          Photo/Video
                        </label>

                        <!-- Input file yang disembunyikan -->
                        <input
                          type="file"
                          id="file-upload"
                          name="media"
                          accept="image/*,video/*"
                          style="display: none"
                        />
                      </li>
                      <li class="me-3 mb-md-0 mb-2">
                        <a href="#" class="btn btn-soft-primary">
                          <img
                            src="static/assets/images/small/08.png"
                            alt="icon"
                            class="img-fluid me-2"
                          />
                          Tag Friend
                        </a>
                      </li>
                      <li class="me-3">
                        <a href="#" class="btn btn-soft-primary">
                          <img
                            src="static/assets/images/small/09.png"
                            alt="icon"
                            class="img-fluid me-2"
                          />
                          Feeling/Activity
                        </a>
                      </li>
                      <li>
                        <button class="btn btn-soft-primary">
                          <div
                            class="card-header-toolbar d-flex align-items-center"
                          >
                            <div class="dropdown">
                              <div
                                class="dropdown-toggle"
                                id="post-option"
                                data-bs-toggle="dropdown"
                              >
                                <i class="ri-more-fill"></i>
                              </div>
                              <div
                                class="dropdown-menu dropdown-menu-right"
                                aria-labelledby="post-option"
                                style=""
                              >
                                <a
                                  class="dropdown-item"
                                  href="#"
                                  data-bs-toggle="modal"
                                  data-bs-target="#post-modal"
                                  >Check in</a
                                >
                                <a
                                  class="dropdown-item"
                                  href="#"
                                  data-bs-toggle="modal"
                                  data-bs-target="#post-modal"
                                  >Live Video</a
                                >
                                <a
                                  class="dropdown-item"
                                  href="#"
                                  data-bs-toggle="modal"
                                  data-bs-target="#post-modal"
                                  >Gif</a
                                >
                                <a
                                  class="dropdown-item"
                                  href="#"
                                  data-bs-toggle="modal"
                                  data-bs-target="#post-modal"
                                  >Watch Party</a
                                >
                                <a
                                  class="dropdown-item"
                                  href="#"
                                  data-bs-toggle="modal"
                                  data-bs-target="#post-modal"
                                  >Play with Friend</a
                                >
                              </div>
                            </div>
                          </div>
                        </button>
                      </li>
                    </ul>
                  </div>
                  <div
                    class="modal fade"
                    id="post-modal"
                    tabindex="-1"
                    aria-labelledby="post-modalLabel"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog modal-fullscreen-sm-down">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="post-modalLabel">
                            Create Post
                          </h5>
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            <i class="ri-close-fill"></i>
                          </button>
                        </div>
                        <div class="modal-body">
                          <form
                            class="post-text"
                            action="/post"
                            method="POST"
                            enctype="multipart/form-data"
                          >
                            <div class="d-flex align-items-center">
                              <div class="user-img">
                                <img
                                  src="static/assets/images/user/1.jpg"
                                  alt="userimg"
                                  class="avatar-60 rounded-circle img-fluid"
                                />
                              </div>
                              <input
                                type="text"
                                name="text"
                                class="form-control rounded ms-3 w-100"
                                placeholder="Write something here..."
                                style="border: none"
                              />
                            </div>

                            <hr />

                            <ul class="row list-unstyled m-0">
                              <li class="col-md-6 mb-3 position-relative">
                                <label
                                  for="file-upload"
                                  class="upload-option"
                                  style="cursor: pointer"
                                >
                                  <img
                                    src="static/assets/images/small/07.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Photo/Video
                                </label>
                                <input
                                  type="file"
                                  id="file-upload"
                                  name="image"
                                  style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    opacity: 0;
                                    cursor: pointer;
                                  "
                                />
                              </li>

                              <li class="col-md-6 mb-3">
                                <a href="/tag-friend" class="upload-option">
                                  <img
                                    src="static/assets/images/small/08.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Tag Friend
                                </a>
                              </li>

                              <li class="col-md-6 mb-3">
                                <a
                                  href="/feeling-activity"
                                  class="upload-option"
                                >
                                  <img
                                    src="static/assets/images/small/09.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Feeling/Activity
                                </a>
                              </li>

                              <li class="col-md-6 mb-3">
                                <a href="/check-in" class="upload-option">
                                  <img
                                    src="static/assets/images/small/10.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Check in
                                </a>
                              </li>

                              <li class="col-md-6 mb-3">
                                <a href="/live-video" class="upload-option">
                                  <img
                                    src="static/assets/images/small/11.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Live Video
                                </a>
                              </li>

                              <li class="col-md-6 mb-3">
                                <a href="/gif" class="upload-option">
                                  <img
                                    src="static/assets/images/small/12.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Gif
                                </a>
                              </li>

                              <li class="col-md-6 mb-3">
                                <a href="/watch-party" class="upload-option">
                                  <img
                                    src="static/assets/images/small/13.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Watch Party
                                </a>
                              </li>

                              <li class="col-md-6 mb-3">
                                <a
                                  href="/play-with-friends"
                                  class="upload-option"
                                >
                                  <img
                                    src="static/assets/images/small/14.png"
                                    alt="icon"
                                    width="24"
                                    height="24"
                                  />
                                  Play with Friends
                                </a>
                              </li>
                            </ul>

                            <hr />

                            <div class="other-option">
                              <div
                                class="d-flex align-items-center justify-content-between"
                              >
                                <div class="d-flex align-items-center">
                                  <div class="user-img me-3">
                                    <img
                                      src="static/assets/images/user/1.jpg"
                                      alt="userimg"
                                      class="avatar-60 rounded-circle img-fluid"
                                    />
                                  </div>
                                  <h6>Your Story</h6>
                                </div>
                                <div class="card-post-toolbar">
                                  <div class="dropdown">
                                    <span
                                      class="dropdown-toggle"
                                      data-bs-toggle="dropdown"
                                      aria-haspopup="true"
                                      aria-expanded="false"
                                      role="button"
                                    >
                                      <span class="btn btn-primary"
                                        >Friend</span
                                      >
                                    </span>
                                    <div class="dropdown-menu m-0 p-0">
                                      <a class="dropdown-item p-3" href="#">
                                        <div class="d-flex align-items-top">
                                          <i class="ri-save-line h4"></i>
                                          <div class="data ms-2">
                                            <h6>Public</h6>
                                            <p class="mb-0">
                                              Anyone on or off Facebook
                                            </p>
                                          </div>
                                        </div>
                                      </a>
                                      <a class="dropdown-item p-3" href="#">
                                        <div class="d-flex align-items-top">
                                          <i
                                            class="ri-close-circle-line h4"
                                          ></i>
                                          <div class="data ms-2">
                                            <h6>Friends</h6>
                                            <p class="mb-0">
                                              Your Friend on facebook
                                            </p>
                                          </div>
                                        </div>
                                      </a>
                                      <a class="dropdown-item p-3" href="#">
                                        <div class="d-flex align-items-top">
                                          <i
                                            class="ri-user-unfollow-line h4"
                                          ></i>
                                          <div class="data ms-2">
                                            <h6>Friends except</h6>
                                            <p class="mb-0">
                                              Don't show to some friends
                                            </p>
                                          </div>
                                        </div>
                                      </a>
                                      <a class="dropdown-item p-3" href="#">
                                        <div class="d-flex align-items-top">
                                          <i
                                            class="ri-notification-line h4"
                                          ></i>
                                          <div class="data ms-2">
                                            <h6>Only Me</h6>
                                            <p class="mb-0">Only me</p>
                                          </div>
                                        </div>
                                      </a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <button
                              type="submit"
                              class="btn btn-primary d-block w-100 mt-3"
                            >
                              Post
                            </button>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% for post in posts %}
              <div class="col-sm-12">
                <div class="card card-block card-stretch card-height">
                  <div class="card-body">
                    <div class="user-post-data">
                      <div class="d-flex justify-content-between">
                        <div class="me-3">
                          <img
                            class="rounded-circle img-fluid"
                            src="static/assets/images/user/01.jpg"
                            alt=""
                          />
                        </div>
                        <div class="w-100">
                          <div class="d-flex justify-content-between">
                            <div class="">
                              <h5 class="mb-0 d-inline-block">
                                {{ post.full_name }}
                              </h5>
                              <p class="mb-0 text-primary">
                                {{ post.timestamp|naturaltime }}
                              </p>
                            </div>
                            <div class="card-post-toolbar">
                              <div class="dropdown">
                                <span
                                  class="dropdown-toggle"
                                  data-bs-toggle="dropdown"
                                  aria-haspopup="true"
                                  aria-expanded="false"
                                  role="button"
                                >
                                  <i class="ri-more-fill"></i>
                                </span>
                                <div class="dropdown-menu m-0 p-0">
                                  <a class="dropdown-item p-3" href="#">
                                    <div class="d-flex align-items-top">
                                      <div class="h4">
                                        <i class="ri-save-line"></i>
                                      </div>
                                      <div class="data ms-2">
                                        <h6>Save Post</h6>
                                        <p class="mb-0">
                                          Add this to your saved items
                                        </p>
                                      </div>
                                    </div>
                                  </a>
                                  <a class="dropdown-item p-3" href="#">
                                    <div class="d-flex align-items-top">
                                      <i class="ri-close-circle-line h4"></i>
                                      <div class="data ms-2">
                                        <h6>Hide Post</h6>
                                        <p class="mb-0">
                                          See fewer posts like this.
                                        </p>
                                      </div>
                                    </div>
                                  </a>
                                  <a class="dropdown-item p-3" href="#">
                                    <div class="d-flex align-items-top">
                                      <i class="ri-user-unfollow-line h4"></i>
                                      <div class="data ms-2">
                                        <h6>Unfollow User</h6>
                                        <p class="mb-0">
                                          Stop seeing posts but stay friends.
                                        </p>
                                      </div>
                                    </div>
                                  </a>
                                  <a class="dropdown-item p-3" href="#">
                                    <div class="d-flex align-items-top">
                                      <i class="ri-notification-line h4"></i>
                                      <div class="data ms-2">
                                        <h6>Notifications</h6>
                                        <p class="mb-0">
                                          Turn on notifications for this post
                                        </p>
                                      </div>
                                    </div>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="mt-3">
                      <p>{{ post.text }}</p>
                    </div>
                    <div class="user-post">
                      {% if post.image is string %}
                      <img
                        src="{{ post.image.replace('\\', '/') }}"
                        alt="post-image"
                        class="img-fluid rounded w-100"
                      />
                      {% elif post.image|length == 1 %}
                      <img
                        src="{{ post.image[0].replace('\\', '/') }}"
                        alt="post-image"
                        class="img-fluid rounded w-100"
                      />
                      {% else %}
                      <div class="d-grid grid-rows-2 grid-flow-col gap-3">
                        {% for image in post.image %}
                        <div class="row-span-1">
                          <img
                            src="{{ image.replace('\\', '/') }}"
                            alt="post-image"
                            class="img-fluid rounded w-100"
                          />
                        </div>
                        {% endfor %}
                      </div>
                      {% endif %}
                    </div>
                    <div class="comment-area mt-3">
                      <div
                        class="d-flex justify-content-between align-items-center flex-wrap"
                      >
                        <div
                          class="like-block position-relative d-flex align-items-center"
                        >
                          <div class="d-flex align-items-center">
                            <div class="like-data">
                              <div class="dropdown">
                                <span
                                  class="dropdown-toggle"
                                  data-bs-toggle="dropdown"
                                >
                                  <img
                                    id="reaction-icon-{{ post._id }}"
                                    src="{{ url_for('static', filename='assets/images/icon/' + '%02d' % (['like','love','happy','haha','think','sad','lovely'].index(post.user_reaction or 'like') + 1) + '.png') }}"
                                    class="img-fluid"
                                    alt=""
                                  />
                                </span>
                                <div class="dropdown-menu py-2">
                                  {% for reaction in
                                  ['like','love','happy','haha','think','sad','lovely']
                                  %}
                                  <a
                                    class="me-2"
                                    href="#"
                                    onclick="reactToPost('{{ post._id }}', '{{ reaction }}')"
                                  >
                                    <img
                                      src="{{ url_for('static', filename='assets/images/icon/' + '%02d' % loop.index + '.png') }}"
                                      class="img-fluid"
                                      title="{{ reaction|capitalize }}"
                                    />
                                  </a>
                                  {% endfor %}
                                </div>
                              </div>
                            </div>
                            <div class="total-like-block ms-2 me-3">
                              <div class="dropdown">
                                <span
                                  class="dropdown-toggle"
                                  data-bs-toggle="dropdown"
                                  role="button"
                                >
                                  {{ post.like_count }} Likes
                                </span>
                                <div class="dropdown-menu">
                                  {% if post.liked_users %} {% for name in
                                  post.liked_users %}
                                  <a class="dropdown-item" href="#"
                                    >{{ name }}</a
                                  >
                                  {% endfor %} {% else %}
                                  <a
                                    class="dropdown-item disabled text-muted"
                                    href="#"
                                    >Belum ada yang menyukai</a
                                  >
                                  {% endif %}
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="total-comment-block">
                            <div class="dropdown">
                              <span
                                class="dropdown-toggle"
                                data-bs-toggle="dropdown"
                                role="button"
                                >{{ post.komentar_count }} Komentar</span
                              >
                              <div class="dropdown-menu">
                                <a class="dropdown-item" href="#">Max Emum</a>
                                <a class="dropdown-item" href="#">Bill Yerds</a>
                                <a class="dropdown-item" href="#"
                                  >Hap E. Birthday</a
                                >
                                <a class="dropdown-item" href="#">Tara Misu</a>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div
                          class="share-block d-flex align-items-center feather-icon mt-2 mt-md-0"
                        >
                          <a
                            href="javascript:void(0);"
                            data-bs-toggle="offcanvas"
                            data-bs-target="#share-btn"
                            ><i class="ri-share-line"></i
                            ><span class="ms-1">99 Share</span></a
                          >
                        </div>
                      </div>
                      <hr />
                      <!-- Comments -->
                      <ul class="post-comments list-inline p-0 m-0">
                        {% for komentar in post.komentar_list %}
                        <li class="mb-2">
                          <div class="d-flex">
                            <div class="user-img">
                              <img
                                src="{{ komentar.avatar or url_for('static', filename='static/assets/images/user/01.jpg') }}"
                                alt="userimg"
                                class="avatar-35 rounded-circle img-fluid"
                              />
                            </div>
                            <div class="comment-data-block ms-3">
                              <h6>{{ komentar.full_name }}</h6>
                              <p class="mb-0">{{ komentar.komentar }}</p>
                              <div
                                class="d-flex flex-wrap align-items-center comment-activity"
                              >
                                <a href="#">like</a>
                                <a href="#">reply</a>
                                <a href="#">translate</a>
                                <span
                                  >{{ komentar.timestamp|naturaltime }}</span
                                >
                              </div>
                            </div>
                          </div>
                        </li>
                        {% else %}
                        <li>
                          <div class="text-muted">Belum ada komentar.</div>
                        </li>
                        {% endfor %}
                      </ul>
                      <!-- Input -->
                      <form
                        class="mt-2"
                        action="{{ url_for('kirim_komentar', post_id=post._id) }}"
                        method="POST"
                      >
                        <div class="comment-box">
                          <input
                            type="text"
                            id="commentInput"
                            name="komentar"
                            placeholder="Tulis komentar..."
                          />
                          <div class="comment-actions">
                            <a href="#" onclick="openAttachment('link')"
                              ><i class="ri-link"></i
                            ></a>
                            <a href="#" onclick="openEmojiPicker()"
                              ><i class="ri-user-smile-line"></i
                            ></a>
                            <a href="#" onclick="openEmojiPicker()"
                              ><i class="ri-camera-line"></i
                            ></a>
                            <button type="submit" class="comment-send-btn">
                              <i class="ri-send-plane-fill"></i>
                            </button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            <div class="col-lg-4">
              <div class="card">
                <div class="card-header d-flex justify-content-between">
                  <div class="header-title">
                    <h4 class="card-title">Stories</h4>
                  </div>
                </div>
                <div class="card-body">
                  <ul class="media-story list-inline m-0 p-0">
                    <li class="d-flex mb-3 align-items-center">
                      <a
                        href="/create-story"
                        class="d-flex align-items-center text-decoration-none w-100 story-link"
                      >
                        <div class="story-icon-wrapper">
                          <span class="story-icon">+</span>
                        </div>
                        <div class="stories-data ms-3">
                          <h5 class="mb-0">Create Your Story</h5>
                          <p class="mb-0 text-primary">time to story</p>
                        </div>
                      </a>
                    </li>
                    <li class="d-flex mb-3 align-items-center active">
                      <a
                        href="/story/anna"
                        class="d-flex align-items-center text-decoration-none"
                      >
                        <img
                          src="{{ url_for('static', filename='assets/images/page-img/s2.jpg') }}"
                          alt="story-img"
                          class="rounded-circle img-fluid"
                        />
                        <div class="stories-data ms-3">
                          <h5>Anna Mull</h5>
                          <p class="mb-0">1 hour ago</p>
                        </div>
                      </a>
                    </li>
                    <li class="d-flex mb-3 align-items-center">
                      <a
                        href="/story/ira"
                        class="d-flex align-items-center text-decoration-none"
                      >
                        <img
                          src="{{ url_for('static', filename='assets/images/page-img/s3.jpg') }}"
                          alt="story-img"
                          class="rounded-circle img-fluid"
                        />
                        <div class="stories-data ms-3">
                          <h5>Ira Membrit</h5>
                          <p class="mb-0">4 hour ago</p>
                        </div>
                      </a>
                    </li>
                    <li class="d-flex align-items-center">
                      <a
                        href="/story/bob"
                        class="d-flex align-items-center text-decoration-none"
                      >
                        <img
                          src="{{ url_for('static', filename='assets/images/page-img/s1.jpg') }}"
                          alt="story-img"
                          class="rounded-circle img-fluid"
                        />
                        <div class="stories-data ms-3">
                          <h5>Bob Frapples</h5>
                          <p class="mb-0">9 hour ago</p>
                        </div>
                      </a>
                    </li>
                  </ul>
                  <a href="#" class="btn btn-primary d-block mt-3">See All</a>
                </div>
              </div>
              <div class="card">
                <div class="card-header d-flex justify-content-between">
                  <div class="header-title">
                    <h4 class="card-title">Events</h4>
                  </div>
                  <div class="card-header-toolbar d-flex align-items-center">
                    <div class="dropdown">
                      <div
                        class="dropdown-toggle"
                        id="dropdownMenuButton"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        role="button"
                      >
                        <i class="ri-more-fill h4"></i>
                      </div>
                      <div
                        class="dropdown-menu dropdown-menu-right"
                        aria-labelledby="dropdownMenuButton"
                        style=""
                      >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-eye-fill me-2"></i>View</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-delete-bin-6-fill me-2"></i>Delete</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-pencil-fill me-2"></i>Edit</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-printer-fill me-2"></i>Print</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-file-download-fill me-2"></i>Download</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-body">
                  <ul class="media-story list-inline m-0 p-0">
                    <li class="d-flex mb-4 align-items-center">
                      <img
                        src="static/assets/images/page-img/s4.jpg"
                        alt="story-img"
                        class="rounded-circle img-fluid"
                      />
                      <div class="stories-data ms-3">
                        <h5>Web Workshop</h5>
                        <p class="mb-0">1 hour ago</p>
                      </div>
                    </li>
                    <li class="d-flex align-items-center">
                      <img
                        src="static/assets/images/page-img/s5.jpg"
                        alt="story-img"
                        class="rounded-circle img-fluid"
                      />
                      <div class="stories-data ms-3">
                        <h5>Fun Events and Festivals</h5>
                        <p class="mb-0">1 hour ago</p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="card">
                <div class="card-header d-flex justify-content-between">
                  <div class="header-title">
                    <h4 class="card-title">Upcoming Birthday</h4>
                  </div>
                </div>
                <div class="card-body">
                  <ul class="media-story list-inline m-0 p-0">
                    <li class="d-flex mb-4 align-items-center">
                      <img
                        src="static/assets/images/user/01.jpg"
                        alt="story-img"
                        class="rounded-circle img-fluid"
                      />
                      <div class="stories-data ms-3">
                        <h5>Anna Sthesia</h5>
                        <p class="mb-0">Today</p>
                      </div>
                    </li>
                    <li class="d-flex align-items-center">
                      <img
                        src="static/assets/images/user/02.jpg"
                        alt="story-img"
                        class="rounded-circle img-fluid"
                      />
                      <div class="stories-data ms-3">
                        <h5>Paul Molive</h5>
                        <p class="mb-0">Tomorrow</p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="card">
                <div class="card-header d-flex justify-content-between">
                  <div class="header-title">
                    <h4 class="card-title">Suggested Pages</h4>
                  </div>
                  <div class="card-header-toolbar d-flex align-items-center">
                    <div class="dropdown">
                      <div
                        class="dropdown-toggle"
                        id="dropdownMenuButton01"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        role="button"
                      >
                        <i class="ri-more-fill h4"></i>
                      </div>
                      <div
                        class="dropdown-menu dropdown-menu-right"
                        aria-labelledby="dropdownMenuButton01"
                      >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-eye-fill me-2"></i>View</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-delete-bin-6-fill me-2"></i>Delete</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-pencil-fill me-2"></i>Edit</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-printer-fill me-2"></i>Print</a
                        >
                        <a class="dropdown-item" href="#"
                          ><i class="ri-file-download-fill me-2"></i>Download</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-body">
                  <ul class="suggested-page-story m-0 p-0 list-inline">
                    <li class="mb-3">
                      <div class="d-flex align-items-center mb-3">
                        <img
                          src="static/assets/images/page-img/42.png"
                          alt="story-img"
                          class="rounded-circle img-fluid avatar-50"
                        />
                        <div class="stories-data ms-3">
                          <h5>Iqonic Studio</h5>
                          <p class="mb-0">Lorem Ipsum</p>
                        </div>
                      </div>
                      <img
                        src="static/assets/images/small/img-1.jpg"
                        class="img-fluid rounded"
                        alt="Responsive image"
                      />
                      <div class="mt-3">
                        <a href="#" class="btn d-block"
                          ><i class="ri-thumb-up-line me-2"></i> Like Page</a
                        >
                      </div>
                    </li>
                    <li class="">
                      <div class="d-flex align-items-center mb-3">
                        <img
                          src="static/assets/images/page-img/42.png"
                          alt="story-img"
                          class="rounded-circle img-fluid avatar-50"
                        />
                        <div class="stories-data ms-3">
                          <h5>Cakes & Bakes</h5>
                          <p class="mb-0">Lorem Ipsum</p>
                        </div>
                      </div>
                      <img
                        src="static/assets/images/small/img-2.jpg"
                        class="img-fluid rounded"
                        alt="Responsive image"
                      />
                      <div class="mt-3">
                        <a href="#" class="btn d-block"
                          ><i class="ri-thumb-up-line me-2"></i> Like Page</a
                        >
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-sm-12 text-center">
              <img
                src="static/assets/images/page-img/page-load-loader.gif"
                alt="loader"
                style="height: 100px"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="chat-box" class="card shadow border flex-column"
    style="width: 360px; height: 480px; position: fixed; top:200px; bottom: 20px; right: 90px; z-index: 1050; display: none;">


 <!-- Header -->
 <div class="d-flex justify-content-between align-items-center border-bottom px-3 py-2 bg-white">
  <div class="d-flex align-items-center gap-2">
    <img src="{{ url_for('static', filename=image_path) }}"
         class="rounded-circle" width="32" height="32" alt="Foto">
    <span class="fw-bold text-dark">{{ user.full_name }}</span>
  </div>
  <div class="d-flex align-items-center gap-2 text-primary">
    <button class="btn btn-sm p-0"><i class="fas fa-phone-alt"></i></button>
    <button class="btn btn-sm p-0"><i class="fas fa-video"></i></button>
    <button class="btn btn-sm p-0"><i class="fas fa-minus"></i></button>
    <button class="btn btn-sm p-0" onclick="closeChat()"><i class="fas fa-times"></i></button>
  </div>  
</div>


 <!-- Body -->
 <div class="text-center bg-white flex-grow-1 py-4 px-3 overflow-auto" id="chat-messages">
   <img src="{{ url_for('static', filename=image_path) }}" alt="Profile"
        class="rounded-circle mb-2" width="80" height="80">
   <div class="fw-bold text-dark" style="font-size: 14px;">{{ user.full_name }}</div>
 </div>

 <!-- Footer -->
 <div class="border-top bg-white px-2 py-1">
  <div class="d-flex align-items-center">
    <button class="btn btn-link text-primary p-0 me-1" title="Mic"><i class="fas fa-microphone fa-lg"></i></button>
    <button class="btn btn-link text-primary p-0 me-1" title="Photo"><i class="far fa-image fa-lg"></i></button>
    <button class="btn btn-link text-primary p-0 me-1" title="Sticker"><i class="fas fa-sticky-note fa-lg"></i></button>
    <button class="btn btn-link text-primary p-0 me-1" title="GIF"><i class="fas fa-file-video fa-lg"></i></button>

    <input type="text" id="chat-input" class="form-control form-control-sm mx-2 rounded-pill" placeholder="Aa" oninput="toggleSendButton()">

    <button class="btn btn-link text-primary p-0 me-1" title="Emoji"><i class="far fa-smile fa-lg"></i></button>
    <input type="hidden" id="receiver-id" value="{{ user._id }}">
    <input type="hidden" id="sender-id" value="{{ session.get('user_id') }}">
    
    
    <!-- Tombol Like -->
    <button id="like-button" class="btn btn-link text-primary p-0" title="Like">
      <i class="fas fa-thumbs-up fa-lg"></i>
    </button>

    <!-- Tombol Kirim -->
    <button id="send-button" class="btn btn-link text-primary p-0 d-none" title="Send">
      <i class="fas fa-paper-plane fa-lg"></i>
    </button>
  </div>
</div>


 <!-- Status -->
 <div class="text-center text-muted small py-1 px-2">
   Sekarang Anda berteman dengan {{ user.full_name }}
 </div>
</div>
    <!-- Wrapper End-->
    <footer class="iq-footer bg-white">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-6">
            <ul class="list-inline mb-0">
              <li class="list-inline-item">
                <a href="static/dashboard/privacy-policy.html"
                  >Privacy Policy</a
                >
              </li>
              <li class="list-inline-item">
                <a href="static/dashboard/terms-of-service.html"
                  >Terms of Use</a
                >
              </li>
            </ul>
          </div>
          <div class="col-lg-6 d-flex justify-content-end">
            Copyright 2020 <a href="#">SocialV</a> All Rights Reserved.
          </div>
        </div>
      </div>
    </footer>
    <!-- Backend Bundle JavaScript -->
    <script src="static/assets/js/libs.min.js"></script>
    <!-- slider JavaScript -->
    <script src="static/assets/js/slider.js"></script>
    <!-- masonry JavaScript -->
    <script src="static/assets/js/masonry.pkgd.min.js"></script>
    <!-- SweetAlert JavaScript -->
    <script src="static/assets/js/enchanter.js"></script>
    <!-- SweetAlert JavaScript -->
    <script src="static/assets/js/sweetalert.js"></script>
    <!-- app JavaScript -->
    <script src="static/assets/js/charts/weather-chart.js"></script>
    <script src="static/assets/js/app.js"></script>
    <script src="static/vendor/vanillajs-datepicker/dist/js/datepicker.min.js"></script>
    <script src="static/assets/js/lottie.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    


    <script>
    const friendList = {{ friend_list_data | tojson }};

  // 2) Utility untuk (re)render daftar teman dengan status dot & label
  function renderFriends(onlineIds) {
    const container = document.querySelector(".media-height");
    container.innerHTML = "";

    friendList.forEach(f => {
      // cek apakah f._id ada di onlineIds
      const isOnline   = onlineIds.includes(f._id);
      const dotClass   = isOnline ? "status-online" : "";       // default offline pakai dot abu
      const statusText = isOnline ? "Online" : "Offline";

      const html = `
        <div class="d-flex align-items-center mb-4">
          <div class="iq-profile-avatar ${dotClass}">
            <img class="rounded-circle avatar-50"
                 src="${f.profile_picture}"
                 alt="${f.full_name}" />
          </div>
          <div class="ms-3">
            <h6 class="mb-0">${f.full_name}</h6>
            <p class="mb-0">${statusText}</p>
          </div>
        </div>
      `;
      container.insertAdjacentHTML("beforeend", html);
    });
  }

  // 3) inisialisasi: semua teman offline
  renderFriends([]);

  // 4) koneksi Socket.IO
  const socket = io({
    auth: {
      user_id:   "{{ session.get('user_id') }}",
      full_name: "{{ session.get('full_name') }}"
    }
  });

  socket.on("connect", () => {
    socket.emit("request_online_users");
  });

  socket.on("online_users", users => {
    // server kirim array {user_id, full_name, profile_picture}
    const onlineIds = users.map(u => u.user_id);
    renderFriends(onlineIds);
  });

  // opsional: live update saat user connect/disconnect
  socket.on("user_connected",   () => socket.emit("request_online_users"));
  socket.on("user_disconnected",() => socket.emit("request_online_users"));

  // Menerima pesan dari server
  socket.on("new_message", (data) => {
    console.log(" Dapat pesan:", data);
    const receiverId = document.getElementById("receiver-id").value;

    // Jika chat belum terbuka, bisa dibuka otomatis
    if (receiverId !== data.sender_id) {
      openChat(data.sender_id); // Pastikan fungsi ini ada
    }

    const chatBody = document.querySelector("#chat-box .flex-grow-1");
    const messageElement = document.createElement("div");

    const isOwnMessage = data.sender_id === document.getElementById("sender-id").value;
    messageElement.classList.add(isOwnMessage ? "text-end" : "text-start", "mb-2");

    messageElement.innerHTML = `
      <span class="badge ${isOwnMessage ? "bg-primary" : "bg-secondary"}" style="padding: 10px 20px;
                                                border-radius: 20px;
                                                max-width: 70%;
                                                font-size: 14px;">${data.message}</span>
    `;
    chatBody.appendChild(messageElement);
    chatBody.scrollTop = chatBody.scrollHeight;
  });
  function openChat() {
    const chatBox = document.getElementById('chat-box');
    chatBox.style.display = 'flex';
    chatBox.classList.remove('chat-pop'); // Reset animasi kalau dibuka lagi
    void chatBox.offsetWidth; // Trigger reflow untuk restart animasi
    chatBox.classList.add('chat-pop');
  }

  function closeChat() {
    const chatBox = document.getElementById('chat-box');
    chatBox.style.display = 'none';
    chatBox.classList.remove('chat-pop');
  }
   function toggleSendButton() {
    const input = document.getElementById("chat-input");
    const likeButton = document.getElementById("like-button");
    const sendButton = document.getElementById("send-button");

    if (input.value.trim() !== "") {
      likeButton.classList.add("d-none");
      sendButton.classList.remove("d-none");
    } else {
      likeButton.classList.remove("d-none");
      sendButton.classList.add("d-none");
    }
  }

      function reactToPost(postId, reaction) {
        fetch(`/react/${postId}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ reaction: reaction }),
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.message === "Reaction updated successfully!") {
              const reactionIcon = document.querySelector(
                `#reaction-icon-${postId}`
              );
              const iconMap = {
                like: "01.png",
                love: "02.png",
                happy: "03.png",
                haha: "04.png",
                think: "05.png",
                sad: "06.png",
                lovely: "07.png",
              };
              reactionIcon.src = `/static/assets/images/icon/${iconMap[reaction]}`;
            }
          })
          .catch((error) => console.error("Error:", error));
      }
      window.addEventListener("load", function () {
        document.getElementById("loading").style.display = "none";
      });


    </script>

    <!-- offcanvas start -->

    <div
      class="offcanvas offcanvas-bottom share-offcanvas"
      tabindex="-1"
      id="share-btn"
      aria-labelledby="shareBottomLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="shareBottomLabel">Share</h5>
        <button
          type="button"
          class="btn-close text-reset"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body small">
        <div class="d-flex flex-wrap align-items-center">
          <div class="text-center me-3 mb-3">
            <img
              src="static/assets/images/icon/08.png"
              class="img-fluid rounded mb-2"
              alt=""
            />
            <h6>Facebook</h6>
          </div>
          <div class="text-center me-3 mb-3">
            <img
              src="static/assets/images/icon/09.png"
              class="img-fluid rounded mb-2"
              alt=""
            />
            <h6>Twitter</h6>
          </div>
          <div class="text-center me-3 mb-3">
            <img
              src="static/assets/images/icon/10.png"
              class="img-fluid rounded mb-2"
              alt=""
            />
            <h6>Instagram</h6>
          </div>
          <div class="text-center me-3 mb-3">
            <img
              src="static/assets/images/icon/11.png"
              class="img-fluid rounded mb-2"
              alt=""
            />
            <h6>Google Plus</h6>
          </div>
          <div class="text-center me-3 mb-3">
            <img
              src="static/assets/images/icon/13.png"
              class="img-fluid rounded mb-2"
              alt=""
            />
            <h6>In</h6>
          </div>
          <div class="text-center me-3 mb-3">
            <img
              src="static/assets/images/icon/12.png"
              class="img-fluid rounded mb-2"
              alt=""
            />
            <h6>YouTube</h6>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
